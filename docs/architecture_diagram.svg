<svg viewBox="0 0 1200 900" xmlns="http://www.w3.org/2000/svg">
  <!-- Define styles -->
  <defs>
    <style>
      .title { font: bold 28px sans-serif; fill: #2c3e50; }
      .subtitle { font: bold 18px sans-serif; fill: #34495e; }
      .text { font: 14px sans-serif; fill: #2c3e50; }
      .small-text { font: 12px sans-serif; fill: #555; }
      .box { fill: #ecf0f1; stroke: #34495e; stroke-width: 2; }
      .primary-box { fill: #3498db; stroke: #2980b9; stroke-width: 2; }
      .success-box { fill: #2ecc71; stroke: #27ae60; stroke-width: 2; }
      .warning-box { fill: #e74c3c; stroke: #c0392b; stroke-width: 2; }
      .info-box { fill: #9b59b6; stroke: #8e44ad; stroke-width: 2; }
      .arrow { stroke: #34495e; stroke-width: 2; fill: none; marker-end: url(#arrowhead); }
      .white-text { fill: white; font: bold 14px sans-serif; }
    </style>
    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#34495e" />
    </marker>
  </defs>

  <!-- Title -->
  <text x="600" y="40" text-anchor="middle" class="title">Titanic Cassandra Data Model - Architecture</text>

  <!-- Phase 1: Raw Data -->
  <text x="100" y="100" class="subtitle">Phase 1: Raw Data</text>
  
  <rect x="50" y="120" width="200" height="80" class="warning-box" rx="5"/>
  <text x="150" y="145" text-anchor="middle" class="white-text">titanic_passager_info</text>
  <text x="150" y="165" text-anchor="middle" class="white-text">.csv (10K rows)</text>
  <text x="150" y="185" text-anchor="middle" class="small-text" fill="white">PassengerId, Name, Sex,</text>
  <text x="150" y="200" text-anchor="middle" class="small-text" fill="white">Age, SibSp, Parch</text>

  <rect x="280" y="120" width="200" height="80" class="warning-box" rx="5"/>
  <text x="380" y="145" text-anchor="middle" class="white-text">titanic_passager_trip</text>
  <text x="380" y="165" text-anchor="middle" class="white-text">.csv (10K rows)</text>
  <text x="380" y="185" text-anchor="middle" class="small-text" fill="white">PassengerId, Pclass, Ticket,</text>
  <text x="380" y="200" text-anchor="middle" class="small-text" fill="white">Fare, Cabin, Embarked, Survived</text>

  <!-- Arrow to preprocessing -->
  <path d="M 250 210 L 250 250" class="arrow"/>
  <path d="M 380 210 L 380 250" class="arrow"/>

  <!-- Phase 2: Preprocessing -->
  <text x="100" y="270" class="subtitle">Phase 2: Data Preprocessing</text>
  
  <rect x="50" y="290" width="430" height="180" class="primary-box" rx="5"/>
  <text x="265" y="315" text-anchor="middle" class="white-text">Python Script (Pandas)</text>
  
  <!-- Preprocessing steps -->
  <rect x="70" y="330" width="390" height="25" fill="rgba(255,255,255,0.2)" rx="3"/>
  <text x="80" y="348" class="white-text">1. Merge datasets on PassengerId</text>
  
  <rect x="70" y="360" width="390" height="25" fill="rgba(255,255,255,0.2)" rx="3"/>
  <text x="80" y="378" class="white-text">2. Handle null values (Age, Embarked, Cabin)</text>
  
  <rect x="70" y="390" width="390" height="25" fill="rgba(255,255,255,0.2)" rx="3"/>
  <text x="80" y="408" class="white-text">3. Create AgeRange column (0-17, 18-29, 30-44...)</text>
  
  <rect x="70" y="420" width="390" height="25" fill="rgba(255,255,255,0.2)" rx="3"/>
  <text x="80" y="438" class="white-text">4. Generate 6 optimized CSV files (one per table)</text>

  <!-- Arrow to CSV files -->
  <path d="M 265 480 L 265 520" class="arrow"/>

  <!-- Phase 3: Processed CSV -->
  <text x="100" y="540" class="subtitle">Phase 3: Processed Data</text>
  
  <g transform="translate(0, 0)">
    <rect x="20" y="560" width="180" height="50" class="success-box" rx="3"/>
    <text x="110" y="580" text-anchor="middle" class="white-text">survivors_by_</text>
    <text x="110" y="597" text-anchor="middle" class="white-text">class.csv</text>
  </g>

  <g transform="translate(0, 0)">
    <rect x="210" y="560" width="180" height="50" class="success-box" rx="3"/>
    <text x="300" y="580" text-anchor="middle" class="white-text">passengers_by_</text>
    <text x="300" y="597" text-anchor="middle" class="white-text">port_age.csv</text>
  </g>

  <g transform="translate(0, 0)">
    <rect x="400" y="560" width="180" height="50" class="success-box" rx="3"/>
    <text x="490" y="580" text-anchor="middle" class="white-text">women_survivors</text>
    <text x="490" y="597" text-anchor="middle" class="white-text">_by_class.csv</text>
  </g>

  <g transform="translate(0, 0)">
    <rect x="20" y="620" width="180" height="50" class="success-box" rx="3"/>
    <text x="110" y="640" text-anchor="middle" class="white-text">passengers_by_</text>
    <text x="110" y="657" text-anchor="middle" class="white-text">age_range.csv</text>
  </g>

  <g transform="translate(0, 0)">
    <rect x="210" y="620" width="180" height="50" class="success-box" rx="3"/>
    <text x="300" y="640" text-anchor="middle" class="white-text">port_survival_</text>
    <text x="300" y="657" text-anchor="middle" class="white-text">analysis.csv</text>
  </g>

  <g transform="translate(0, 0)">
    <rect x="400" y="620" width="180" height="50" class="success-box" rx="3"/>
    <text x="490" y="640" text-anchor="middle" class="white-text">class_age_survival</text>
    <text x="490" y="657" text-anchor="middle" class="white-text">_analysis.csv</text>
  </g>

  <!-- Arrow to Cassandra -->
  <path d="M 110 680 L 700 720" class="arrow"/>
  <path d="M 300 680 L 700 720" class="arrow"/>
  <path d="M 490 680 L 700 720" class="arrow"/>

  <!-- Phase 4: Cassandra -->
  <text x="700" y="100" class="subtitle">Phase 4: Apache Cassandra</text>
  
  <rect x="600" y="120" width="550" height="600" class="box" rx="5"/>
  <text x="875" y="145" text-anchor="middle" class="subtitle">Cassandra Cluster (titanic_db keyspace)</text>
  
  <!-- Table boxes inside Cassandra -->
  <rect x="620" y="170" width="240" height="90" class="info-box" rx="3"/>
  <text x="740" y="195" text-anchor="middle" class="white-text">survivors_by_class</text>
  <text x="740" y="215" text-anchor="middle" class="small-text" fill="white">PK: (pclass, survived)</text>
  <text x="740" y="233" text-anchor="middle" class="small-text" fill="white">CK: passengerid</text>
  <text x="740" y="251" text-anchor="middle" class="small-text" fill="white">ðŸ“Š Query 5.1</text>

  <rect x="890" y="170" width="240" height="90" class="info-box" rx="3"/>
  <text x="1010" y="195" text-anchor="middle" class="white-text">passengers_by_port_age</text>
  <text x="1010" y="215" text-anchor="middle" class="small-text" fill="white">PK: embarked</text>
  <text x="1010" y="233" text-anchor="middle" class="small-text" fill="white">CK: age, passengerid</text>
  <text x="1010" y="251" text-anchor="middle" class="small-text" fill="white">ðŸ“Š Query 5.2</text>

  <rect x="620" y="280" width="240" height="90" class="info-box" rx="3"/>
  <text x="740" y="305" text-anchor="middle" class="white-text">women_survivors_by_class</text>
  <text x="740" y="325" text-anchor="middle" class="small-text" fill="white">PK: (pclass, sex, survived)</text>
  <text x="740" y="343" text-anchor="middle" class="small-text" fill="white">CK: passengerid</text>
  <text x="740" y="361" text-anchor="middle" class="small-text" fill="white">ðŸ“Š Query 5.3</text>

  <rect x="890" y="280" width="240" height="90" class="info-box" rx="3"/>
  <text x="1010" y="305" text-anchor="middle" class="white-text">passengers_by_age_range</text>
  <text x="1010" y="325" text-anchor="middle" class="small-text" fill="white">PK: agerange</text>
  <text x="1010" y="343" text-anchor="middle" class="small-text" fill="white">CK: age, passengerid</text>
  <text x="1010" y="361" text-anchor="middle" class="small-text" fill="white">ðŸ“Š Query 5.4</text>

  <rect x="620" y="390" width="240" height="90" class="info-box" rx="3"/>
  <text x="740" y="415" text-anchor="middle" class="white-text">port_survival_analysis</text>
  <text x="740" y="435" text-anchor="middle" class="small-text" fill="white">PK: (embarked, survived)</text>
  <text x="740" y="453" text-anchor="middle" class="small-text" fill="white">CK: passengerid</text>
  <text x="740" y="471" text-anchor="middle" class="small-text" fill="white">ðŸ“Š Query 5.5</text>

  <rect x="890" y="390" width="240" height="90" class="info-box" rx="3"/>
  <text x="1010" y="415" text-anchor="middle" class="white-text">class_age_survival_analysis</text>
  <text x="1010" y="435" text-anchor="middle" class="small-text" fill="white">PK: (agerange, pclass)</text>
  <text x="1010" y="453" text-anchor="middle" class="small-text" fill="white">CK: survived, passengerid</text>
  <text x="1010" y="471" text-anchor="middle" class="small-text" fill="white">ðŸ“Š Query 5.6</text>

  <!-- Design Principles -->
  <rect x="620" y="500" width="510" height="200" fill="#f8f9fa" stroke="#dee2e6" stroke-width="2" rx="3"/>
  <text x="875" y="525" text-anchor="middle" class="subtitle">Design Principles</text>
  
  <text x="640" y="555" class="text">âœ… Query-Driven Design: One table per query pattern</text>
  <text x="640" y="580" class="text">âœ… No ALLOW FILTERING: All queries use partition keys</text>
  <text x="640" y="605" class="text">âœ… No Secondary Indexes: Denormalization for performance</text>
  <text x="640" y="630" class="text">âœ… Balanced Partitions: Composite keys prevent hot spots</text>
  <text x="640" y="655" class="text">âœ… Natural Ordering: Clustering keys provide sorted results</text>
  <text x="640" y="680" class="text">âš¡ Performance: O(1) reads, ~10-20ms latency per query</text>

  <!-- Legend -->
  <rect x="50" y="800" width="500" height="80" fill="#ffffff" stroke="#34495e" stroke-width="1" rx="3"/>
  <text x="70" y="825" class="subtitle">Legend</text>
  
  <rect x="70" y="835" width="30" height="20" class="warning-box" rx="2"/>
  <text x="110" y="850" class="small-text">Raw Data</text>
  
  <rect x="190" y="835" width="30" height="20" class="primary-box" rx="2"/>
  <text x="230" y="850" class="small-text">Processing</text>
  
  <rect x="310" y="835" width="30" height="20" class="success-box" rx="2"/>
  <text x="350" y="850" class="small-text">Processed CSV</text>
  
  <rect x="450" y="835" width="30" height="20" class="info-box" rx="2"/>
  <text x="490" y="850" class="small-text">Cassandra Table</text>

  <!-- Footer note -->
  <text x="600" y="880" text-anchor="middle" class="small-text">Data flows from raw CSVs â†’ Python preprocessing â†’ optimized CSVs â†’ Cassandra tables â†’ analytical queries</text>
</svg>